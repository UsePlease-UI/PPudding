import{c as P,g as oe,r as s,j as m,b as ie}from"./iframe-BuoardWh.js";import"./Divider-CmqEjyvg.js";import{L as X}from"./index-J64gs0aM.js";import{F as le}from"./FormControl-Xq63dV1U.js";import{u as ue,o as ce,f as de,s as fe,a as pe}from"./floating-ui.react-dom-CPAi9Wfx.js";import{C as me}from"./ClickAwayListener-Dbuk1jqb.js";import{T as be}from"./TextField-CvQZJ6eT.js";import{A as U}from"./constants-0pBEQA9X.js";var B,J;function ge(){if(J)return B;J=1;var D="Expected a function",h=NaN,b="[object Symbol]",f=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,O=/^0o[0-7]+$/i,I=parseInt,S=typeof P=="object"&&P&&P.Object===Object&&P,w=typeof self=="object"&&self&&self.Object===Object&&self,k=S||w||Function("return this")(),n=Object.prototype,v=n.toString,E=Math.max,F=Math.min,d=function(){return k.Date.now()};function g(e,l,p){var y,t,a,r,c,C,j=0,K=!1,_=!1,q=!0;if(typeof e!="function")throw new TypeError(D);l=A(l)||0,i(p)&&(K=!!p.leading,_="maxWait"in p,a=_?E(A(p.maxWait)||0,l):a,q="trailing"in p?!!p.trailing:q);function V(o){var x=y,L=t;return y=t=void 0,j=o,r=e.apply(L,x),r}function ne(o){return j=o,c=setTimeout(N,l),K?V(o):r}function ae(o){var x=o-C,L=o-j,Y=l-x;return _?F(Y,a-L):Y}function G(o){var x=o-C,L=o-j;return C===void 0||x>=l||x<0||_&&L>=a}function N(){var o=d();if(G(o))return H(o);c=setTimeout(N,ae(o))}function H(o){return c=void 0,q&&y?V(o):(y=t=void 0,r)}function re(){c!==void 0&&clearTimeout(c),j=0,y=C=t=c=void 0}function se(){return c===void 0?r:H(d())}function W(){var o=d(),x=G(o);if(y=arguments,t=this,C=o,x){if(c===void 0)return ne(C);if(_)return c=setTimeout(N,l),V(C)}return c===void 0&&(c=setTimeout(N,l)),r}return W.cancel=re,W.flush=se,W}function i(e){var l=typeof e;return!!e&&(l=="object"||l=="function")}function M(e){return!!e&&typeof e=="object"}function $(e){return typeof e=="symbol"||M(e)&&v.call(e)==b}function A(e){if(typeof e=="number")return e;if($(e))return h;if(i(e)){var l=typeof e.valueOf=="function"?e.valueOf():e;e=i(l)?l+"":l}if(typeof e!="string")return e===0?e:+e;e=e.replace(f,"");var p=T.test(e);return p||O.test(e)?I(e.slice(2),p?2:8):u.test(e)?h:+e}return B=g,B}var he=ge();const ve=oe(he);function z(D){const{onChange:h,onSelect:b,options:f,value:u,...T}=D,{floatingStyles:O,refs:I}=ue({middleware:[ce(1),de({padding:20}),fe({apply({availableHeight:t,elements:a,rects:r}){Object.assign(a.floating.style,{maxHeight:`${t}px`,minWidth:`${r.reference.width}px`})},padding:20})],placement:"bottom",whileElementsMounted:pe}),S=s.useRef(null),w=s.useRef(null),k=s.useRef([]),[n,v]=s.useState(!1),[E,F]=s.useState(!1),[d,g]=s.useState(-1),[i,M]=s.useState(),$=s.useId(),A=s.useId(),e=s.useCallback(()=>{v(!1),F(!1),g(-1)},[]),l=s.useCallback(t=>{M(t),b(t),h(t.label),e()},[b,h,e]),p=s.useCallback(t=>{h(t.currentTarget.value),t.currentTarget.value?n||v(!0):(M(void 0),b()),g(0)},[n,h,b]),y=s.useCallback(()=>{if(i&&n?(v(!1),g(-1)):v(t=>!t),!n&&i){const t=f.findIndex(a=>a.value===(i==null?void 0:i.value));g(t===-1?0:t)}},[i,n,f]);return s.useEffect(()=>{const t=a=>{if(!(!n&&a.key!=="ArrowDown")){if(!n&&a.key==="ArrowDown"){F(!0),v(!0),g(0);return}a.key==="ArrowDown"?(a.preventDefault(),g(r=>r+1===f.length?0:r+1)):a.key==="ArrowUp"?(a.preventDefault(),g(r=>r===0?f.length-1:r-1)):a.key==="Enter"?(a.preventDefault(),b(f[d]),e()):(a.key==="Tab"||a.key==="Escape")&&(a.preventDefault(),e())}};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[n,d,b,f,e]),s.useEffect(()=>{n&&d!==-1&&k.current[d].scrollIntoView({block:"nearest"})},[n,d]),m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:I.setReference,className:"w-max",children:m.jsx(be,{...T,ref:S,isFullWidth:!0,"aria-activedescendant":n&&d!==-1?`${A}-${d}`:void 0,"aria-expanded":n,spellCheck:"false",tabIndex:0,type:"text",value:u,"aria-autocomplete":"list","aria-controls":n?$:void 0,autoCapitalize:"false",onChange:p,onClick:y,role:"combobox"})}),n&&m.jsx(me,{element:w.current,isOpen:n,anchorElement:S.current,onClose:y,children:m.jsx(X,{ref:t=>{I.setFloating(t),w.current=t},"aria-labelledby":T["aria-labelledby"],className:"w-max",id:$,style:O,children:f.map((t,a)=>m.jsx(X.Item,{ref:r=>{r&&(k.current[a]=r)},id:`${A}-${a}`,isSelected:i!=null&&i.value?i.value===t.value:!1,value:t.value,onClick:()=>l(t),onMouseEnter:()=>g(a),className:E&&d===a?"outline outline-2 outline-offset-[-2px] outline-black":"",label:u?t.label.split(new RegExp(`(${u})`,"gi")).map((r,c)=>m.jsx("span",{className:ie((i==null?void 0:i.value)===t.value?"text-white":new RegExp(`(${u})`,"gi").test(r)?"text-blue-600":"text-black",new RegExp(`(${u})`,"gi").test(r)?"font-semibold":"font-normal"),children:r},r+c)):t.label},t.label))})})]})}z.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"newValue"}],return:{name:"void"}}},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(newOption?: ListboxOptionType) => void",signature:{arguments:[{type:{name:"ListboxOptionType"},name:"newOption"}],return:{name:"void"}}},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"ListboxOptionType"}],raw:"ListboxOptionType[]"},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["Omit"]};const{useArgs:ye}=__STORYBOOK_MODULE_PREVIEW_API__,{fn:Q}=__STORYBOOK_MODULE_TEST__,xe={args:{isDisabled:!1,isReadOnly:!1,onChange:Q(),onSelect:Q(),options:U,value:""},argTypes:{isDisabled:{control:"boolean",description:"if true, the component will be disabled"},isReadOnly:{control:"boolean",description:"if true, user cannot change the value of the component"},onChange:{control:!1,description:"callback fired when new value is entered or selected",table:{type:{summary:"(newValue: string) => void"}}},onSelect:{control:!1,description:"callback fired when select is clicked (undefined is returned when there is no entered value)",table:{type:{summary:"(selected?: { label: string; value: string; idx?: string }) => void"}}},options:{control:"object",description:"options to be shown",table:{type:{summary:"{ label : string; value: string; idx?: string }"}}},value:{control:!1,description:"value attribute of the input element",table:{type:{summary:"string"}},type:"string"}},component:z,parameters:{layout:"centered"},title:"Combobox/Autocomplete"},R={args:{options:U,value:""},render:function(h){const[{options:b,value:f},u]=ye(),T=s.useId(),O=s.useId(),I=s.useMemo(()=>ve(n=>{if(n.length!==0&&n!==""){const v=U.filter(E=>E.label.includes(n));u({options:v})}else u({options:U})},100),[u]),S=s.useCallback(n=>I(n),[I]),w=s.useCallback(n=>{u({value:n}),S(n)},[u,S]),k=s.useCallback(n=>u({value:(n==null?void 0:n.label)||""}),[u]);return m.jsx("div",{className:"max-w-80",children:m.jsx(le,{inputId:T,labelText:"지역 선택",labelTextId:O,children:m.jsx(z,{...h,"aria-labelledby":O,id:T,value:f,onChange:w,onSelect:k,options:b})})})}};var Z,ee,te;R.parameters={...R.parameters,docs:{...(Z=R.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: {
    options: AUTOCOMPLETE_LIST,
    value: ''
  },
  render: function Render(args) {
    const [{
      options,
      value
    }, updateArgs] = useArgs();
    const inputId = useId();
    const labelTextId = useId();
    const debouncedSearch = useMemo(() => debounce((value: string) => {
      if (value.length !== 0 && value !== '') {
        const newArr = AUTOCOMPLETE_LIST.filter(el => el.label.includes(value));
        updateArgs({
          options: newArr
        });
      } else {
        updateArgs({
          options: AUTOCOMPLETE_LIST
        });
      }
    }, 100), [updateArgs]);
    const handleSearch = useCallback((value: string) => debouncedSearch(value), [debouncedSearch]);
    const handleChange = useCallback((newValue: string) => {
      updateArgs({
        value: newValue
      });
      handleSearch(newValue);
    }, [updateArgs, handleSearch]);
    const handleSelect = useCallback((selected?: ListboxOptionType) => updateArgs({
      value: selected?.label || ''
    }), [updateArgs]);
    return <div className="max-w-80">
        <FormControl inputId={inputId} labelText="지역 선택" labelTextId={labelTextId}>
          <Autocomplete {...args} aria-labelledby={labelTextId} id={inputId} value={value} onChange={handleChange} onSelect={handleSelect} options={options} />
        </FormControl>
      </div>;
  }
}`,...(te=(ee=R.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};const Te=["Default"],je=Object.freeze(Object.defineProperty({__proto__:null,Default:R,__namedExportsOrder:Te,default:xe},Symbol.toStringTag,{value:"Module"}));export{je as A};

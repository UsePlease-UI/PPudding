import{j as m}from"./jsx-runtime-D_zvdyIk.js";import{c as N,g as se,r as o}from"./iframe-Bvnjis0j.js";import"./Divider-d1f6oLpb.js";import"./index-2bbXtrGh.js";import{j as ie}from"./format-FJJUaZs2.js";import{F as le}from"./FormControl-rdzzxUeK.js";import{u as ce,L as X,o as ue,f as de,s as fe,a as pe}from"./floating-ui.react-dom-CueN99rQ.js";import{C as me}from"./ClickAwayListener-CPZc8d4R.js";import"./CheckboxGroup-DMOk0w9z.js";import"./RadioGroup-DgwC2Q89.js";import"./Textarea-BhtT3amx.js";import{T as be}from"./TextField-Dg_b9olT.js";import{A as P}from"./constants-DXFrAw5b.js";var B,J;function ge(){if(J)return B;J=1;var D="Expected a function",h=NaN,b="[object Symbol]",f=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,w=/^0o[0-7]+$/i,I=parseInt,S=typeof N=="object"&&N&&N.Object===Object&&N,O=typeof self=="object"&&self&&self.Object===Object&&self,k=S||O||Function("return this")(),n=Object.prototype,y=n.toString,E=Math.max,F=Math.min,d=function(){return k.Date.now()};function g(e,l,p){var v,t,r,a,u,C,j=0,K=!1,_=!1,U=!0;if(typeof e!="function")throw new TypeError(D);l=A(l)||0,i(p)&&(K=!!p.leading,_="maxWait"in p,r=_?E(A(p.maxWait)||0,l):r,U="trailing"in p?!!p.trailing:U);function V(s){var x=v,L=t;return v=t=void 0,j=s,a=e.apply(L,x),a}function ne(s){return j=s,u=setTimeout($,l),K?V(s):a}function re(s){var x=s-C,L=s-j,Y=l-x;return _?F(Y,r-L):Y}function G(s){var x=s-C,L=s-j;return C===void 0||x>=l||x<0||_&&L>=r}function $(){var s=d();if(G(s))return H(s);u=setTimeout($,re(s))}function H(s){return u=void 0,U&&v?V(s):(v=t=void 0,a)}function ae(){u!==void 0&&clearTimeout(u),j=0,v=C=t=u=void 0}function oe(){return u===void 0?a:H(d())}function W(){var s=d(),x=G(s);if(v=arguments,t=this,C=s,x){if(u===void 0)return ne(C);if(_)return u=setTimeout($,l),V(C)}return u===void 0&&(u=setTimeout($,l)),a}return W.cancel=ae,W.flush=oe,W}function i(e){var l=typeof e;return!!e&&(l=="object"||l=="function")}function M(e){return!!e&&typeof e=="object"}function q(e){return typeof e=="symbol"||M(e)&&y.call(e)==b}function A(e){if(typeof e=="number")return e;if(q(e))return h;if(i(e)){var l=typeof e.valueOf=="function"?e.valueOf():e;e=i(l)?l+"":l}if(typeof e!="string")return e===0?e:+e;e=e.replace(f,"");var p=T.test(e);return p||w.test(e)?I(e.slice(2),p?2:8):c.test(e)?h:+e}return B=g,B}var he=ge();const ye=se(he);function z(D){const{onChange:h,onSelect:b,options:f,value:c,...T}=D,{floatingStyles:w,refs:I}=ce({middleware:[ue(1),de({padding:20}),fe({apply({availableHeight:t,elements:r,rects:a}){Object.assign(r.floating.style,{maxHeight:`${t}px`,minWidth:`${a.reference.width}px`})},padding:20})],placement:"bottom",whileElementsMounted:pe}),S=o.useRef(null),O=o.useRef(null),k=o.useRef([]),[n,y]=o.useState(!1),[E,F]=o.useState(!1),[d,g]=o.useState(-1),[i,M]=o.useState(),q=o.useId(),A=o.useId(),e=o.useCallback(()=>{y(!1),F(!1),g(-1)},[]),l=o.useCallback(t=>{M(t),b(t),h(t.label),e()},[b,h,e]),p=o.useCallback(t=>{h(t.currentTarget.value),t.currentTarget.value?n||y(!0):(M(void 0),b()),g(0)},[n,h,b]),v=o.useCallback(()=>{if(i&&n?(y(!1),g(-1)):y(t=>!t),!n&&i){const t=f.findIndex(r=>r.value===(i==null?void 0:i.value));g(t===-1?0:t)}},[i,n,f]);return o.useEffect(()=>{const t=r=>{if(!(!n&&r.key!=="ArrowDown")){if(!n&&r.key==="ArrowDown"){F(!0),y(!0),g(0);return}switch(r.key){case"ArrowDown":r.preventDefault(),g(a=>a+1===f.length?0:a+1);break;case"ArrowUp":r.preventDefault(),g(a=>a===0?f.length-1:a-1);break;case"Enter":r.preventDefault(),b(f[d]),e();break;case"Tab":r.preventDefault(),e();break;case"Escape":r.preventDefault(),e();break}}};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[n,d,b,f,e]),o.useEffect(()=>{n&&d!==-1&&k.current[d].scrollIntoView({block:"nearest"})},[n,d]),m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:I.setReference,className:"w-max",children:m.jsx(be,{...T,ref:S,isFullWidth:!0,"aria-activedescendant":n&&d!==-1?`${A}-${d}`:void 0,"aria-expanded":n,spellCheck:"false",tabIndex:0,type:"text",value:c,"aria-autocomplete":"list","aria-controls":n?q:void 0,autoCapitalize:"false",onChange:p,onClick:v,role:"combobox"})}),n&&m.jsx(me,{element:O.current,isOpen:n,anchorElement:S.current,onClose:v,children:m.jsx(X,{ref:t=>{I.setFloating(t),O.current=t},"aria-labelledby":T["aria-labelledby"],className:"w-max",id:q,style:w,children:f.map((t,r)=>m.jsx(X.Item,{ref:a=>{a&&(k.current[r]=a)},id:`${A}-${r}`,isSelected:i!=null&&i.value?i.value===t.value:!1,value:t.value,onClick:()=>l(t),onMouseEnter:()=>g(r),className:E&&d===r?"outline outline-2 outline-offset-[-2px] outline-black":"",label:c?t.label.split(new RegExp(`(${c})`,"gi")).map((a,u)=>m.jsx("span",{className:ie((i==null?void 0:i.value)===t.value?"text-white":new RegExp(`(${c})`,"gi").test(a)?"text-blue-600":"text-black",new RegExp(`(${c})`,"gi").test(a)?"font-semibold":"font-normal"),children:a},a+u)):t.label},t.label))})})]})}z.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"newValue"}],return:{name:"void"}}},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(newOption?: ListboxOptionType) => void",signature:{arguments:[{type:{name:"ListboxOptionType"},name:"newOption"}],return:{name:"void"}}},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"ListboxOptionType"}],raw:"ListboxOptionType[]"},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["Omit"]};const{useArgs:ve}=__STORYBOOK_MODULE_PREVIEW_API__,{fn:Q}=__STORYBOOK_MODULE_TEST__,xe={args:{isDisabled:!1,isReadOnly:!1,onChange:Q(),onSelect:Q(),options:P,value:""},argTypes:{isDisabled:{control:"boolean",description:"if true, the component will be disabled",table:{category:"optional"}},isReadOnly:{control:"boolean",description:"if true, user cannot change the value of the component",table:{category:"optional"}},onChange:{control:!1,description:"callback fired when new value is entered or selected",table:{category:"required",type:{summary:"(newValue: string) => void"}}},onSelect:{control:!1,description:"callback fired when select is clicked (undefined is returned when there is no entered value)",table:{category:"required",type:{summary:"(selected?: { label: string; value: string; idx?: string }) => void"}}},options:{control:"object",description:"options to be shown",table:{category:"required",type:{summary:"{ label : string; value: string; idx?: string }"}}},value:{control:!1,description:"value attribute of the input element",table:{category:"required",type:{summary:"string"}},type:"string"}},component:z,parameters:{docs:{argTypes:{sort:"requiredFirst"}},layout:"centered"},title:"Combobox/Autocomplete"},R={args:{options:P,value:""},render:function(h){const[{options:b,value:f},c]=ve(),T=o.useId(),w=o.useId(),I=o.useMemo(()=>ye(n=>{if(n.length!==0&&n!==""){const y=P.filter(E=>E.label.includes(n));c({options:y})}else c({options:P})},100),[c]),S=o.useCallback(n=>I(n),[I]),O=o.useCallback(n=>{c({value:n}),S(n)},[c,S]),k=o.useCallback(n=>c({value:(n==null?void 0:n.label)||""}),[c]);return m.jsx("div",{className:"max-w-80",children:m.jsx(le,{inputId:T,labelText:"지역 선택",labelTextId:w,children:m.jsx(z,{...h,"aria-labelledby":w,id:T,value:f,onChange:O,onSelect:k,options:b})})})}};var Z,ee,te;R.parameters={...R.parameters,docs:{...(Z=R.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: {
    options: AUTOCOMPLETE_LIST,
    value: ''
  },
  render: function Render(args) {
    const [{
      options,
      value
    }, updateArgs] = useArgs();
    const inputId = useId();
    const labelTextId = useId();
    const debouncedSearch = useMemo(() => debounce((value: string) => {
      if (value.length !== 0 && value !== '') {
        const newArr = AUTOCOMPLETE_LIST.filter(el => el.label.includes(value));
        updateArgs({
          options: newArr
        });
      } else {
        updateArgs({
          options: AUTOCOMPLETE_LIST
        });
      }
    }, 100), [updateArgs]);
    const handleSearch = useCallback((value: string) => debouncedSearch(value), [debouncedSearch]);
    const handleChange = useCallback((newValue: string) => {
      updateArgs({
        value: newValue
      });
      handleSearch(newValue);
    }, [updateArgs, handleSearch]);
    const handleSelect = useCallback((selected?: ListboxOptionType) => updateArgs({
      value: selected?.label || ''
    }), [updateArgs]);
    return <div className="max-w-80">
        <FormControl inputId={inputId} labelText="지역 선택" labelTextId={labelTextId}>
          <Autocomplete {...args} aria-labelledby={labelTextId} id={inputId} value={value} onChange={handleChange} onSelect={handleSelect} options={options} />
        </FormControl>
      </div>;
  }
}`,...(te=(ee=R.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};const Te=["Default"],Fe=Object.freeze(Object.defineProperty({__proto__:null,Default:R,__namedExportsOrder:Te,default:xe},Symbol.toStringTag,{value:"Module"}));export{Fe as A};

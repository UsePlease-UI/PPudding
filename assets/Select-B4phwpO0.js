import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{r as s}from"./iframe-D3ksDC8p.js";import{u as z,L as R,o as M,f as U,s as V,a as _}from"./floating-ui.react-dom-tm7qjnXt.js";import{C as B}from"./ClickAwayListener-DZCOysg-.js";import"./Divider-d1f6oLpb.js";import"./index-CTbkXrZC.js";import{j as w}from"./format-FJJUaZs2.js";import"./FormControl-rdzzxUeK.js";import"./Button-c9xFUnZQ.js";import"./Chip-C_KpFqzW.js";import"./IconButton-CW6tuTid.js";import"./ToggleButtonGroup-CCOMZlVR.js";import{a as H}from"./styles-8MddfzVJ.js";import{F as W}from"./ChevronDownIcon-CB48nmxx.js";function G(S){const{className:g,id:k,isDisabled:T,isReadOnly:L,onChange:u,options:n=[],placeholder:x,selected:i,...b}=S,{floatingStyles:O,refs:v}=z({middleware:[M(1),U({padding:20}),V({apply({availableHeight:e,elements:t,rects:c}){Object.assign(t.floating.style,{maxHeight:`${e}px`,minWidth:`${c.reference.width}px`})},padding:20})],placement:"bottom",whileElementsMounted:_}),d=s.useRef(null),C=s.useRef(null),y=s.useRef([]),[a,j]=s.useState(!1),[q,h]=s.useState(!1),[r,p]=s.useState(-1),I=s.useId(),D=s.useId(),F=s.useCallback(()=>{a?(h(!1),p(-1)):p(i?n.findIndex(e=>e.value===i):0),j(e=>!e)},[a,i,n]),$=s.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&h(!0)},[]),l=s.useCallback(()=>{j(!1),h(!1),p(-1)},[]),A=s.useCallback(e=>{u(e),l()},[u,l]),K=s.useMemo(()=>{var e;return(e=n.find(t=>t.value===i))==null?void 0:e.label},[i,n]);return s.useEffect(()=>{var e,t;a&&r!==-1&&((e=y.current[r])==null||e.focus(),(t=y.current[r])==null||t.scrollIntoView({block:"nearest"}))},[a,r]),s.useEffect(()=>{const e=t=>{var c,m,E,N;if(a)switch(t.key){case"ArrowDown":t.preventDefault(),p(f=>f+1===n.length?0:f+1);break;case"ArrowUp":t.preventDefault(),p(f=>f===0?n.length-1:f-1);break;case"Enter":t.preventDefault(),u(n[r].value),l(),(c=d.current)==null||c.focus();break;case" ":t.preventDefault(),u(n[r].value),l(),(m=d.current)==null||m.focus();break;case"Tab":t.preventDefault(),l(),(E=d.current)==null||E.focus();break;case"Escape":t.preventDefault(),l(),(N=d.current)==null||N.focus();break}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[a,r,u,n,l]),o.jsx("div",{className:w("w-max",g&&g),children:o.jsxs("div",{className:"group relative",children:[o.jsxs("button",{...b,ref:e=>{v.setReference(e),d.current=e},"aria-expanded":a,"aria-labelledby":b["aria-labelledby"]?`${b["aria-labelledby"]} ${k||I}`:void 0,disabled:T||L,id:k||I,tabIndex:0,type:"button","aria-controls":a?D:void 0,"aria-haspopup":"listbox",onClick:F,onKeyDown:$,className:w(H("outlined"),"flex h-10 min-w-30 items-center justify-between rounded pl-3 pr-2 text-black",x&&!i&&"text-gray-600"),children:[o.jsx("span",{className:"mr-2.5 flex-1 truncate text-left text-14 font-normal leading-normal text-inherit",children:x&&!i?x:K}),o.jsx("span",{className:"size-5",children:o.jsx(W,{className:w("!block h-5 w-5 text-black transition-transform",a&&"rotate-180")})})]}),a&&o.jsx(B,{element:d.current,isOpen:a,anchorElement:C.current,onClose:l,children:o.jsx(R,{ref:e=>{v.setFloating(e),C.current=e},"aria-labelledby":b["aria-labelledby"],className:"w-max",id:D,style:O,children:n.map(({label:e,value:t},c)=>o.jsx(R.Item,{ref:m=>{m&&(y.current[c]=m)},isSelected:t===i,label:e,tabIndex:r===c?0:-1,value:t,onClick:A,className:q&&r===c?"outline outline-2 outline-offset-[-2px] outline-black":""},`${e}-${t}`))})})]})})}G.__docgenInfo={description:"",methods:[],displayName:"Select",props:{selected:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(selected: string) => void",signature:{arguments:[{type:{name:"string"},name:"selected"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""},options:{required:!1,tsType:{name:"Array",elements:[{name:"ListboxOptionType"}],raw:"ListboxOptionType[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};export{G as S};

import{j as p}from"./jsx-runtime-D_zvdyIk.js";import{c as N,g as ie,r as o}from"./iframe-xSyj_TgM.js";import{C as oe}from"./ClickAwayListener-PTds9hu3.js";import"./Divider-d1f6oLpb.js";import"./index-B6xylhcj.js";import{j as se}from"./format-FJJUaZs2.js";import"./FormControl-D2aD3kdj.js";import{u as le,L as ue,a as ce}from"./usePosition-wcTbM3nq.js";import{T as de}from"./TextField-KWNHDyU-.js";import{A as P}from"./constants-DXFrAw5b.js";import"./index-Cei-x5BZ.js";var D,X;function pe(){if(X)return D;X=1;var w="Expected a function",I=NaN,x="[object Symbol]",O=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,b=/^0b[01]+$/i,v=/^0o[0-7]+$/i,h=parseInt,j=typeof N=="object"&&N&&N.Object===Object&&N,r=typeof self=="object"&&self&&self.Object===Object&&self,l=j||r||Function("return this")(),y=Object.prototype,a=y.toString,R=Math.max,q=Math.min,S=function(){return l.Date.now()};function V(e,i,c){var t,d,m,f,u,g,L=0,H=!1,_=!1,W=!0;if(typeof e!="function")throw new TypeError(w);i=A(i)||0,E(c)&&(H=!!c.leading,_="maxWait"in c,m=_?R(A(c.maxWait)||0,i):m,W="trailing"in c?!!c.trailing:W);function B(n){var T=t,k=d;return t=d=void 0,L=n,f=e.apply(k,T),f}function te(n){return L=n,u=setTimeout(M,i),H?B(n):f}function ne(n){var T=n-g,k=n-L,z=i-T;return _?q(z,m-k):z}function K(n){var T=n-g,k=n-L;return g===void 0||T>=i||T<0||_&&k>=m}function M(){var n=S();if(K(n))return Y(n);u=setTimeout(M,ne(n))}function Y(n){return u=void 0,W&&t?B(n):(t=d=void 0,f)}function re(){u!==void 0&&clearTimeout(u),L=0,t=g=d=u=void 0}function ae(){return u===void 0?f:Y(S())}function U(){var n=S(),T=K(n);if(t=arguments,d=this,g=n,T){if(u===void 0)return te(g);if(_)return u=setTimeout(M,i),B(g)}return u===void 0&&(u=setTimeout(M,i)),f}return U.cancel=re,U.flush=ae,U}function E(e){var i=typeof e;return!!e&&(i=="object"||i=="function")}function C(e){return!!e&&typeof e=="object"}function $(e){return typeof e=="symbol"||C(e)&&a.call(e)==x}function A(e){if(typeof e=="number")return e;if($(e))return I;if(E(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=E(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(O,"");var c=b.test(e);return c||v.test(e)?h(e.slice(2),c?2:8):s.test(e)?I:+e}return D=V,D}var me=pe();const fe=ie(me);function G(w){const{helperText:I,labelText:x,name:O,onChange:s,onSelect:b,options:v,value:h}=w,j=o.useRef(null),r=o.useRef(null),[l,y]=o.useState(!1),[a,R]=o.useState(),[q,S]=o.useState(void 0),V=o.useId(),E=o.useId(),C=o.useId(),$=o.useId(),A=le({inputId:E,isVisible:l,listBoxId:C,totalLength:v.length}),e=o.useCallback(t=>{R(t),b(t),s(t.label),y(!1)},[b,s]),i=o.useCallback(t=>{s(t.currentTarget.value),t.currentTarget.value?y(!0):(R(void 0),b())},[s,b]),c=o.useCallback(()=>{if(a&&l?(y(!1),S(void 0)):y(t=>!t),!l&&a){const t=v.findIndex(d=>d.value===(a==null?void 0:a.value));S(t!==-1?String(t):void 0)}},[a,l,v]);return o.useEffect(()=>{const t=r.current;if(l&&t){const{left:d,marginTop:m,maxWidth:f,top:u}=A;t.style.top=`${u+m}px`,t.style.left=`${d}px`;const g=document.getElementById(C);g&&(g.style.maxWidth=`${f}px`)}},[l,A,C]),p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex w-full items-center justify-center gap-1.25 bg-white",children:p.jsx(de,{ref:j,isFullWidth:!0,"aria-activedescendant":q?`${$}-${q}`:void 0,"aria-expanded":l,"aria-invalid":"false","aria-label":x?void 0:`${O}`,helperText:I,id:E,labelText:x,spellCheck:"false",type:"text",value:h,"aria-autocomplete":"list","aria-controls":l?C:void 0,autoCapitalize:"false",onChange:i,onClick:c,role:"combobox"})}),l&&p.jsx(oe,{element:r.current,isOpen:l,anchorElement:j.current,onClose:c,children:p.jsx(ue,{ref:r,"aria-label":x?void 0:O,className:"fixed w-full",id:C,labelId:x?V:void 0,value:(a==null?void 0:a.value)||"",options:v,renderItem:(t,d)=>p.jsx(ce,{id:`${$}-${d}`,isSelected:a!=null&&a.value?a.value===t.value:!1,value:t.value,onClick:()=>e(t),onHover:()=>S(String(d)),label:h?t.label.split(new RegExp(`(${h})`,"gi")).map((m,f)=>p.jsx("span",{className:se((a==null?void 0:a.value)===t.value?"text-white":new RegExp(`(${h})`,"gi").test(m)?"text-blue-600":"text-black",new RegExp(`(${h})`,"gi").test(m)?"font-semibold":"font-normal"),children:m},m+f)):t.label},t.label)})})]})}G.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{name:{required:!0,tsType:{name:"string"},description:""},value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"newValue"}],return:{name:"void"}}},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(newOption?: ListboxOptionType) => void",signature:{arguments:[{type:{name:"ListboxOptionType"},name:"newOption"}],return:{name:"void"}}},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"ListboxOptionType"}],raw:"ListboxOptionType[]"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},labelText:{required:!1,tsType:{name:"string"},description:""}}};const{useArgs:ge}=__STORYBOOK_MODULE_PREVIEW_API__,{fn:J}=__STORYBOOK_MODULE_TEST__,Ee={args:{labelText:"",onChange:J(),onSelect:J(),options:P,value:""},argTypes:{helperText:{control:"text",description:"extra description of the component",table:{category:"optional"}},labelText:{control:"text",description:"content of label component",table:{category:"optional"}},name:{control:"text",description:"name attribute of the input element",table:{category:"required",type:{summary:"string"}}},onChange:{control:!1,description:"callback fired when new value is entered or selected",table:{category:"required",type:{summary:"(newValue: string) => void"}}},onSelect:{control:!1,description:"callback fired when select is clicked (undefined is returned when there is no entered value)",table:{category:"required",type:{summary:"(selected?: { label: string; value: string; idx?: string }) => void"}}},options:{control:"object",description:"options to be shown",table:{category:"required",type:{summary:"{ label : string; value: string; idx?: string }"}}},value:{control:!1,description:"value attribute of the input element",table:{category:"required",type:{summary:"string"}},type:"string"}},component:G,parameters:{docs:{argTypes:{sort:"requiredFirst"}},layout:"centered"},tags:["autodocs"],title:"Combobox/Autocomplete"},F={args:{labelText:"Lorem Ipsum",name:"lorem ipsum",options:P,value:""},render:function(I){const[{options:x,value:O},s]=ge(),b=o.useMemo(()=>fe(r=>{if(r.length!==0&&r!==""){const l=P.filter(y=>y.label.includes(r));s({options:l})}else s({options:P})},100),[s]),v=o.useCallback(r=>b(r),[b]),h=o.useCallback(r=>{s({value:r}),v(r)},[s,v]),j=o.useCallback(r=>s({value:(r==null?void 0:r.label)||""}),[s]);return p.jsx(p.Fragment,{children:p.jsx("div",{className:"max-w-80",children:p.jsx(G,{...I,value:O,onChange:h,onSelect:j,options:x})})})}};var Q,Z,ee;F.parameters={...F.parameters,docs:{...(Q=F.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    labelText: 'Lorem Ipsum',
    name: 'lorem ipsum',
    options: AUTOCOMPLETE_LIST,
    value: ''
  },
  render: function Render(args) {
    const [{
      options,
      value
    }, updateArgs] = useArgs();
    const debouncedSearch = useMemo(() => debounce((value: string) => {
      if (value.length !== 0 && value !== '') {
        const newArr = AUTOCOMPLETE_LIST.filter(el => el.label.includes(value as string));
        updateArgs({
          options: newArr
        });
      } else {
        updateArgs({
          options: AUTOCOMPLETE_LIST
        });
      }
    }, 100), [updateArgs]);
    const handleSearch = useCallback((value: string) => debouncedSearch(value), [debouncedSearch]);
    const handleChange = useCallback((newValue: string) => {
      updateArgs({
        value: newValue
      });
      handleSearch(newValue);
    }, [updateArgs, handleSearch]);
    const handleSelect = useCallback((selected?: ListboxOptionType) => updateArgs({
      value: selected?.label || ''
    }), [updateArgs]);
    return <>
        <div className="max-w-80">
          <Autocomplete {...args} value={value} onChange={handleChange} onSelect={handleSelect} options={options} />
        </div>
      </>;
  }
}`,...(ee=(Z=F.parameters)==null?void 0:Z.docs)==null?void 0:ee.source}}};const Ae=["Default"];export{F as Default,Ae as __namedExportsOrder,Ee as default};

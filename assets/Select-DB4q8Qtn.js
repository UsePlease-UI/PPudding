import{r as s,j as r,b as h}from"./iframe-BuoardWh.js";import{u as A,o as K,f as z,s as M,a as U}from"./floating-ui.react-dom-CPAi9Wfx.js";import{C as _}from"./ClickAwayListener-Dbuk1jqb.js";import"./Divider-CmqEjyvg.js";import{L as N}from"./index-J64gs0aM.js";import"./FormControl-Xq63dV1U.js";import{F as H}from"./ChevronDownIcon-BzKjwBpu.js";function V(R){const{className:w,id:k,isDisabled:D,isReadOnly:T,onChange:p,options:n=[],placeholder:y,selected:i,...m}=R,{floatingStyles:L,refs:v}=A({middleware:[K(1),z({padding:20}),M({apply({availableHeight:e,elements:t,rects:o}){Object.assign(t.floating.style,{maxHeight:`${e}px`,minWidth:`${o.reference.width}px`})},padding:20})],placement:"bottom",whileElementsMounted:U}),b=s.useRef(null),C=s.useRef(null),x=s.useRef([]),[a,j]=s.useState(!1),[O,g]=s.useState(!1),[l,d]=s.useState(-1),I=s.useId(),E=s.useId(),S=s.useCallback(()=>{a?(g(!1),d(-1)):d(i?n.findIndex(e=>e.value===i):0),j(e=>!e)},[a,i,n]),q=s.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&g(!0)},[]),c=s.useCallback(()=>{j(!1),g(!1),d(-1)},[]),F=s.useCallback(e=>{p(e),c()},[p,c]),$=s.useMemo(()=>{var e;return(e=n.find(t=>t.value===i))==null?void 0:e.label},[i,n]);return s.useEffect(()=>{var e,t;a&&l!==-1&&((e=x.current[l])==null||e.focus(),(t=x.current[l])==null||t.scrollIntoView({block:"nearest"}))},[a,l]),s.useEffect(()=>{const e=t=>{var o,u;a&&(t.key==="ArrowDown"?(t.preventDefault(),d(f=>f+1===n.length?0:f+1)):t.key==="ArrowUp"?(t.preventDefault(),d(f=>f===0?n.length-1:f-1)):t.key==="Enter"||t.key===" "?(t.preventDefault(),p(n[l].value),c(),(o=b.current)==null||o.focus()):(t.key==="Tab"||t.key==="Escape")&&(t.preventDefault(),c(),(u=b.current)==null||u.focus()))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[a,l,p,n,c]),r.jsx("div",{className:h("w-max",w&&w),children:r.jsxs("div",{className:"group relative",children:[r.jsxs("button",{...m,ref:e=>{v.setReference(e),b.current=e},"aria-expanded":a,"aria-labelledby":m["aria-labelledby"]?`${m["aria-labelledby"]} ${k||I}`:void 0,disabled:D||T,id:k||I,tabIndex:0,type:"button","aria-controls":a?E:void 0,"aria-haspopup":"listbox",onClick:S,onKeyDown:q,className:h("flex h-10 min-w-30 items-center justify-between rounded border border-black bg-white pl-3 pr-2 text-black hover:bg-gray-100 active:bg-gray-200 disabled:pointer-events-none disabled:border-gray-400 disabled:bg-gray-100 disabled:text-gray-600",y&&!i&&"text-gray-600"),children:[r.jsx("span",{className:"mr-2.5 flex-1 truncate text-left text-14 font-normal leading-normal text-inherit",children:y&&!i?y:$}),r.jsx("span",{className:"size-5",children:r.jsx(H,{className:h("!block h-5 w-5 text-black transition-transform",a&&"rotate-180")})})]}),a&&r.jsx(_,{element:b.current,isOpen:a,anchorElement:C.current,onClose:c,children:r.jsx(N,{ref:e=>{v.setFloating(e),C.current=e},"aria-labelledby":m["aria-labelledby"],className:"w-max",id:E,style:L,children:n.map(({label:e,value:t},o)=>r.jsx(N.Item,{ref:u=>{u&&(x.current[o]=u)},isSelected:t===i,label:e,tabIndex:l===o?0:-1,value:t,onClick:F,className:O&&l===o?"outline outline-2 outline-offset-[-2px] outline-black":""},`${e}-${t}`))})})]})})}V.__docgenInfo={description:"",methods:[],displayName:"Select",props:{selected:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(selected: string) => void",signature:{arguments:[{type:{name:"string"},name:"selected"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""},options:{required:!1,tsType:{name:"Array",elements:[{name:"ListboxOptionType"}],raw:"ListboxOptionType[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};export{V as S};
